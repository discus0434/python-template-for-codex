---
name: plan-reviewer
description: プラン実装後・docs更新前に必ず使うセルフレビュースキル。プランの「確定事項/設計/タスク」と現コード・テストの一致を確認し、不足や乖離を修正する。
license: Complete terms in LICENSE.txt
---

# Plan Reviewer

## トリガ
- 実装が完了し、**docs更新に入る直前**
- 「プラン通りに実装できているか」確認したいとき

## 目的
- プランと現コード/テストの**一致**を確認し、不足・乖離を洗い出す。
- 問題点があれば**修正まで行い**、問題がない状態で次へ進む。

## 入力
- 対象プラン: `plans/<plan-name>.md`

## 手順
1. **プラン確認**: 「確定事項/設計/タスク」を抽出する。
2. **実装確認**:
   - 追加/更新予定のファイルが揃っているか
   - 予定したモジュール/クラス/関数が存在し責務が一致するか
   - テストが計画した正常/異常/境界をカバーしているか
3. **乖離の洗い出し**: 不足/ズレを箇条書きで列挙。
4. **修正**: 乖離点を修正する（コード/テスト）。
5. **再確認**: 乖離がゼロになるまで繰り返す。
6. **判断が必要なズレ**がある場合はユーザーに戻す（計画変更の合意が必要）。

## チェック項目（必須）
- “確定事項/設計/タスク”に対して、現コード・テストがどこまで一致しているか
- 計画で追加/更新予定のファイルが揃っているか
- 要件の実装箇所（関数/モジュール）が想定通りか

## 出力フォーマット（例）
```
Self-Review Summary
- OK: <一致している点>
- Gap: <不足/乖離点>
- Fix: <修正内容>
```

## 注意
- プラン自体が誤っていると判明した場合や、プランと実装が著しく乖離し修正不可能だと判断した場合は、修正前にユーザーへ確認し合意を取る。
